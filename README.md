[![Build Status](https://travis-ci.org/travis-ci/travis-web.svg?branch=master)](https://travis-ci.org/travis-ci/travis-web)

## 概要

形態素解析を行うためのツールです

## 使い方

### Rustをインストール

https://rustup.rs/ に従い、Rustをインストールしてください。
自動的に最新の安定版がインストールされます。

### ビルド

以下のコマンドで最適化したバイナリを作成します。
初回はダウンロードや依存ライブラリのビルドを含むので時間がかかります。

```
cargo build --release
```

ビルド結果は `./target/release/` に保存されます。必要に応じてコピーしてください。

### 辞書の構築

入力ファイルをダブル配列にして、出力ファイルに保存します。

```
./target/release/build-dict array16 [出力ファイル] < [辞書テキスト]
```

ダブル配列以外の形式にも対応しています。

- `array16`: ダブル配列
- `hash16`: 再帰ハッシュマップ
- `trie16`: トライ木

```
./target/release/build-dict [変換オプション] [出力ファイル] < [辞書テキスト]
```

### 確認

出力した辞書に全単語が載っているかをチェックします。

```
./target/release/test-dict array16 [出力された辞書ファイル] < [辞書テキスト]
```

### 形態素解析

標準入力を形態素解析します。

```
echo "すもももももももものうち" | ./target/release/analyze array16 [出力された辞書ファイル] [連結コストファイル]
```

## パフォーマンス

データ構造による辞書の構築時間の違いは以下のようになります。

| オプション | 文字コード | データ構造 | 構築時間 |
|--|--|--|--:|
| array8 | UTF-8 | ダブル配列 | 4m38.075s |
| array16 | UTF-16 | ダブル配列 | 1m24.115s |
| trie8 | UTF-8 | トライ木 | 0m0.674s |
| trie16 | UTF-16 | トライ木 | 0m0.419s |
| trie32 | ユニコードポイント | トライ木 | 0m0.411s |
| hash8 | UTF-8 | 再帰HashMap | 0m0.958s |
| hash16 | UTF-16 | 再帰HashMap | 0m0.607s |
| hash32 | ユニコードポイント | 再帰HashMap | 0m0.691s |
| fast8 | UTF-8 | ビットマップキャッシュを用いてダブル配列を構築 | 0m4.506s |
| fast16 | UTF-16 | ビットマップキャッシュを用いてダブル配列を構築 | 0m43.220s |
| trans8 | UTF-8 | トライ木を構築し、ダブル配列に変換 | 0m2.685s |
| trans16 | UTF-16 | トライ木を構築し、ダブル配列に変換 | 0m1.414s |
| trans32 | ユニコードポイント | トライ木を構築し、ダブル配列に変換 | 0m1.295s |
